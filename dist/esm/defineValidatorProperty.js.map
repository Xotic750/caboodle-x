{"version":3,"sources":["../../src/defineValidatorProperty.js"],"names":["isUndefined","_isFunction","assertIs","assertIsObject","_has","nilifyIs","surround","_Boolean","_defineProperty","_Object","_apply","_call","toPropertyKey","MSG1","MSG2","toPropertyDescriptor","_toPropertyDescriptor","desc","descriptor","enumerable","configurable","nilable","validator","TypeError","value","writable","get","set","defineValidatorProperty","object","property","prop","props","isValidInitialValue","quotedProperty","isValidValue","validatorDesctiptor","args","newValue"],"mappings":"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","sourcesContent":["/**\n * @file Utility that needs description.\n * @copyright Copyright (c) 2018-present, Graham Fairweather\n * @module defineValidatorProperty\n */\n\nimport isUndefined from './isUndefined';\nimport _isFunction from './.internal/_isFunction';\nimport assertIs from './assertIs';\nimport assertIsObject from './assertIsObjectLike';\nimport _has from './.internal/_hasOwnProperty';\nimport nilifyIs from './nilifyIs';\nimport surround from './surround';\nimport _Boolean from './.internal/_Boolean';\nimport _defineProperty from './.internal/_defineProperty';\nimport _Object from './.internal/_Object';\nimport _apply from './.internal/_apply';\nimport _call from './.internal/_call';\nimport toPropertyKey from './toPropertyKey';\n\nconst MSG1 = 'Not a valid initial value for ';\nconst MSG2 = 'Not a valid value for  ';\n\nconst toPropertyDescriptor = function _toPropertyDescriptor(desc) {\n  const descriptor = {};\n\n  if (_has(desc, 'enumerable')) {\n    descriptor.enumerable = _Boolean(desc.enumerable);\n  }\n\n  if (_has(desc, 'configurable')) {\n    descriptor.configurable = _Boolean(desc.configurable);\n  }\n\n  if (_has(desc, 'nilable')) {\n    descriptor.nilable = _Boolean(desc.nilable);\n  }\n\n  if (_has(desc, 'validator')) {\n    if (!isUndefined(desc.validator) && !_isFunction(desc.validator)) {\n      throw new TypeError('validator must be a function');\n    }\n\n    descriptor.validator = desc.validator;\n  }\n\n  if (_has(desc, 'value')) {\n    descriptor.value = desc.value;\n  }\n\n  if (_has(desc, 'writable')) {\n    descriptor.writable = _Boolean(desc.writable);\n  }\n\n  if (_has(desc, 'get')) {\n    if (!isUndefined(desc.get) && !_isFunction(desc.get)) {\n      throw new TypeError('getter must be a function');\n    }\n\n    descriptor.get = desc.get;\n  }\n\n  if (_has(desc, 'set')) {\n    if (!isUndefined(desc.set) && !_isFunction(desc.set)) {\n      throw new TypeError('setter must be a function');\n    }\n\n    descriptor.set = desc.set;\n  }\n\n  if ((_has(descriptor, 'get') || _has(descriptor, 'set')) && (_has(descriptor, 'value') || _has(descriptor, 'writable'))) {\n    throw new TypeError('Invalid property descriptor. Cannot both specify accessors and a value or writable attribute');\n  }\n\n  return descriptor;\n};\n\nexport default function defineValidatorProperty(object, property, descriptor) {\n  assertIsObject(object);\n\n  const prop = toPropertyKey(property);\n  const props = toPropertyDescriptor(_Object(descriptor), defineValidatorProperty);\n  const isValidInitialValue = props.nilable && props.validator ? nilifyIs(props.validator) : props.validator;\n  const quotedProperty = surround(prop, '\"');\n\n  if (isValidInitialValue) {\n    assertIs(isValidInitialValue, MSG1 + quotedProperty)(props.value);\n  }\n\n  const isValidValue = props.validator && assertIs(props.validator, MSG2 + quotedProperty);\n\n  const validatorDesctiptor = {\n    configurable: props.configurable,\n    enumerable: props.enumerable,\n  };\n\n  if (props.get) {\n    validatorDesctiptor.get = function get(...args) {\n      return _apply(props.get, this, args);\n    };\n  } else if (isValidValue && _has(props, 'value')) {\n    validatorDesctiptor.get = function get() {\n      return props.value;\n    };\n  }\n\n  if (props.set) {\n    validatorDesctiptor.set = function set(newValue) {\n      return _call(props.set, this, newValue);\n    };\n  } else if (_has(props, 'value')) {\n    if (isValidValue && props.writable) {\n      validatorDesctiptor.set = function set(newValue) {\n        props.value = isValidValue(newValue);\n\n        return props.value;\n      };\n    } else {\n      validatorDesctiptor.value = props.value;\n\n      if (_has(props, 'writable')) {\n        validatorDesctiptor.writable = props.writable;\n      }\n    }\n  }\n\n  return _defineProperty(object, prop, validatorDesctiptor);\n}\n"],"file":"defineValidatorProperty.js"}